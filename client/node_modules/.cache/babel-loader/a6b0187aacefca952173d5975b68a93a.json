{"ast":null,"code":"import _slicedToArray from\"C:/garage-etude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{AppBar,Toolbar,Typography,Avatar,Button}from'@material-ui/core';import useStyles from'./styles.js';import decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Nav=function Nav(){var classes=useStyles();var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,2),dateTime=_useState2[0],setDateTime=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('profile'))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});setUser(null);history.push('/home');};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);useEffect(function(){var id=setInterval(function(){return setDateTime(new Date());},1000);return function(){clearInterval(id);};},[]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.brandContainer,children:[/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/home\",className:classes.heading,variant:\"h3\",children:\"Garage-d'Etude\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:\"log1.png\",alt:\"icon\",height:\"60\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl,children:user.result.firstname.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:\"\".concat(user.result.firstname,\" \").concat(user.result.lastname)}),/*#__PURE__*/_jsx(Typography,{className:classes.time,children:\"\".concat(dateTime.toLocaleDateString(),\" \").concat(dateTime.toLocaleTimeString())}),/*#__PURE__*/_jsx(Button,{className:classes.logout,variant:\"contained\",color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Typography,{className:classes.time,children:\"\".concat(dateTime.toLocaleDateString(),\" \").concat(dateTime.toLocaleTimeString())})})]});};/*\r\nexport class nav extends Component{\r\n  state = {\r\n    curTime: null,\r\n  }\r\n  componentDidMount() {\r\n    setInterval( () => {\r\n      this.setState({\r\n        curTime : new Date().toLocaleString()\r\n      })\r\n    },1000)\r\n  }\r\n  render(){\r\n    \r\n    return(\r\n      \r\n      \r\n      \r\n  )\r\n};\r\n}\r\nexport default nav;\r\n\r\n  /*<div class=\"topnav\">\r\n          <a class=\"active\" href=\"/home\">\r\n            <img src=\"log1.png\" class=\"img\"/>\r\n            Garage d'Etude\r\n          </a>\r\n          <a href=\"#news\" >More</a>\r\n          <a class=\"time\"href=\"#news\" disabled=\"disabled\">{this.state.curTime}</a>\r\n        </div>\r\n        */","map":{"version":3,"sources":["C:/garage-etude/client/src/components/NavBar/nav.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","useDispatch","AppBar","Toolbar","Typography","Avatar","Button","useStyles","decode","Nav","classes","Date","dateTime","setDateTime","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","push","token","decodedToken","exp","getTime","id","setInterval","clearInterval","appBar","brandContainer","heading","image","toolbar","profile","purple","result","name","imageUrl","firstname","charAt","toUpperCase","userName","lastname","time","toLocaleDateString","toLocaleTimeString"],"mappings":"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","sourcesContent":["import React,{ useState, useEffect } from \"react\";\r\nimport { Link ,useHistory,useLocation } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {AppBar , Toolbar, Typography,Avatar,Button } from '@material-ui/core';\r\nimport useStyles from './styles.js';\r\nimport decode from 'jwt-decode';\r\n\r\nexport const Nav = () => {\r\n  const classes=useStyles();\r\n  \r\n  const [dateTime, setDateTime] = useState(new Date());\r\n  const [user,setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const logout = () => {\r\n    dispatch({type : 'LOGOUT'});\r\n    setUser(null);\r\n    history.push('/home'); \r\n  }\r\n\r\n  useEffect(()=>{\r\n    const token = user?.token;\r\n\r\n    if(token){\r\n      const decodedToken = decode(token);\r\n\r\n      if(decodedToken.exp * 1000 < new Date().getTime()) \r\n        logout();\r\n    }\r\n    setUser(JSON.parse(localStorage.getItem('profile')));\r\n  },[location]);\r\n  \r\n    useEffect(() => {\r\n        const id = setInterval(() => setDateTime(new Date()), 1000);\r\n        return () => {\r\n            clearInterval(id);\r\n        }\r\n    }, []);\r\n  return (\r\n    \r\n    <AppBar className={classes.appBar}>\r\n      <div className={classes.brandContainer}>\r\n        <Typography component={Link} to=\"/home\" className={classes.heading} variant=\"h3\" >Garage-d'Etude</Typography>\r\n        <img className={classes.image} src=\"log1.png\" alt=\"icon\" height=\"60\" />\r\n      </div>\r\n      <Toolbar className={classes.toolbar}>\r\n        {user ? (\r\n            <div className={classes.profile}>\r\n              <Avatar className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>{user.result.firstname.charAt(0).toUpperCase()}</Avatar>\r\n              <Typography className={classes.userName} variant=\"h6\">{`${user.result.firstname} ${user.result.lastname}`}</Typography>\r\n              <Typography className={classes.time}>            \r\n                {`${dateTime.toLocaleDateString()} ${dateTime.toLocaleTimeString()}`}\r\n              </Typography>\r\n              <Button className={classes.logout} variant=\"contained\" color=\"secondary\" onClick={logout}>Logout</Button>\r\n            </div>\r\n          ) : (\r\n              <Typography className={classes.time}>            \r\n                {`${dateTime.toLocaleDateString()} ${dateTime.toLocaleTimeString()}`}\r\n              </Typography>   \r\n          )\r\n        }             \r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\n\r\n\r\n/*\r\nexport class nav extends Component{\r\n  state = {\r\n    curTime: null,\r\n  }\r\n  componentDidMount() {\r\n    setInterval( () => {\r\n      this.setState({\r\n        curTime : new Date().toLocaleString()\r\n      })\r\n    },1000)\r\n  }\r\n  render(){\r\n    \r\n    return(\r\n      \r\n      \r\n      \r\n  )\r\n};\r\n}\r\nexport default nav;\r\n\r\n  /*<div class=\"topnav\">\r\n          <a class=\"active\" href=\"/home\">\r\n            <img src=\"log1.png\" class=\"img\"/>\r\n            Garage d'Etude\r\n          </a>\r\n          <a href=\"#news\" >More</a>\r\n          <a class=\"time\"href=\"#news\" disabled=\"disabled\">{this.state.curTime}</a>\r\n        </div>\r\n        */"]},"metadata":{},"sourceType":"module"}